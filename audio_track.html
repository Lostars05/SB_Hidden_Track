  <!doctype html>
  <html lang="ko">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
  <title>Hidden Track PlayList</title>
  <style>
        header {
        position: relative;
        height: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .menu-button {
        position: absolute;
        top: 20px;
        right: 30px;
        font-size: 1rem;
        background: none;
        border: 1px solid white;
        color: white;
        padding: 8px 12px;
        cursor: pointer;
      }
  /* ìŠ¬ë¼ì´ë“œ ë©”ë‰´ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
  #slide-menu {
    position: fixed;
    top: 0;
    right: -300px; /* ì²˜ìŒì—” í™”ë©´ ë°–ì— ìˆ¨ê¹€ */
    width: 250px;
    height: 100%;
    background-color: rgba(15, 15, 26, 0.95); /* ë°˜íˆ¬ëª… ë°°ê²½ */
    color: white;
    padding: 60px 20px;
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.5);
    transition: right 0.4s ease;
    z-index: 999;
  }

  #slide-menu ul {
    list-style: none;
    padding: 0;
  }

  #slide-menu li {
    margin-bottom: 20px;
  }

  #slide-menu a, #slide-menu span {
    color: white;
    text-decoration: none;
    font-size: 1rem;
    cursor: pointer;
  }

  #slide-menu .has-submenu ul {
    display: none;
    margin-top: 10px;
    padding-left: 15px;
    font-size: 0.95rem;
  }

  /* ë©”ë‰´ ì—´ë¦´ ë•Œ í´ë˜ìŠ¤ */
  #slide-menu.open {
    right: 0;
  }

  /* âœ… ëª¨ë°”ì¼ ì „ìš© ìŠ¤íƒ€ì¼ */
    @media screen and (max-width: 768px) {
      .menu-button {
        font-size: 0.9rem;
        padding: 6px 10px;
        right: 20px;
      }

      #slide-menu {
        width: 200px;
        padding: 40px 15px;
      }
    }
    .close-button {
    position: absolute;
    top: 15px;
    right: 15px;
    background: none;
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
  }

    :root{
      --bg:#0f0f11;
      --card:#1f1f23;
      --muted:#bdbdbd; /* cite: 63 */
      --accent1:#e07a3b;
      --accent2:#3bb0e0;
    } /* cite: 64 */
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans KR",Arial}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;padding:36px 16px 80px 16px;box-sizing:border-box}

    /* í”Œë ˆì´ì–´ ë°•ìŠ¤ */
    .player{
      width:84vw;
      max-width:380px; aspect-ratio:1/1; /* cite: 65 */
      min-height: 400px;
      background:linear-gradient(180deg,#25252a,#17171a);
      border-radius:14px; display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:10px; box-shadow:0 12px 40px rgba(0,0,0,0.6); text-align:center;
      user-select:none; /* cite: 66 */
      position:relative; overflow: hidden;
    } 

    /* â­ ê°€ì‚¬ê°€ ë³´ì¼ ë•Œ í”Œë ˆì´ì–´ ìƒíƒœ */
    .player.show-lyrics{
      aspect-ratio: unset;
      height: auto; /* cite: 67 */
      padding-bottom: 24px;
    }

    .title{font-size:1.05rem;font-weight:700;color:#fff;letter-spacing:0.2px}
    .artist{font-size:.88rem;color:var(--muted)}
    
    /* â­ .meta-row ìˆ˜ì •: ì¤‘ì•™ ì •ë ¬ ì¶”ê°€ */
    .meta-row{
      display:flex;
      gap:12px;
      align-items:center; 
      width: 80%;
      justify-content: center; /* â­ ì¤‘ì•™ ì •ë ¬ */
    }
    .play-btn{width:46px;height:46px;border-radius:50%;background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;cursor:pointer}
    .play-btn svg{width:22px;height:22px;fill:#fff;opacity:.95}

    /* â­ ê°€ì‚¬ ë³´ê¸° ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .lyrics-btn{
      padding: 0 14px;
      height: 46px; /* cite: 69 */
      border-radius: 9999px;
      background: rgba(255,255,255,0.06);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: .88rem;
      font-weight: 500;
      color: var(--muted);
      transition: background 180ms, color 180ms; /* cite: 70 */
    }
    .lyrics-btn:hover{
      background: rgba(255,255,255,0.1); /* cite: 71 */
    }
    .lyrics-btn.active {
      background: var(--accent1);
      color: #fff; /* cite: 72 */
    }

    /* â­ ê°€ì‚¬ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ (ì¤‘ì•™ ì •ë ¬ ë° ìŠ¤í¬ë¡¤ ë””ìì¸ ì ìš©) */
    .lyrics-container{
      width: 100%;
      height: 0; /* cite: 73 */
      opacity: 0;
      overflow-y: auto;
      margin-top: 20px;
      padding: 0 20px;
      box-sizing: border-box;
      font-size: 0.9rem;
      color: var(--muted);
      line-height: 1.6;
      text-align: center; /* ì¤‘ì•™ ì •ë ¬ cite: 74 */
      transition: height 300ms ease-out, opacity 300ms ease-out; /* cite: 75 */
      /* Firefoxìš© ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
      scrollbar-width: thin;
      scrollbar-color: rgba(255, 255, 255, 0.1) transparent; /* cite: 76 */
    }
    .player.show-lyrics .lyrics-container{
      height: 150px; 
      opacity: 1; /* cite: 77 */
    }
    .lyrics-container p {
      margin: 0;
      white-space: pre-wrap;
      display: inline-block; /* ì¤‘ì•™ ì •ë ¬ ìœ ì§€ cite: 78 */
    }

    /* â­ ì›¹í‚· ê¸°ë°˜ ë¸Œë¼ìš°ì € (Chrome, Safari) ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ë§ */
    .lyrics-container::-webkit-scrollbar {
      width: 6px; /* ìŠ¤í¬ë¡¤ë°” ë„ˆë¹„ cite: 79 */
    }
    .lyrics-container::-webkit-scrollbar-thumb {
      background-color: rgba(255, 255, 255, 0.15); /* ìŠ¤í¬ë¡¤ í•¸ë“¤ ìƒ‰ìƒ cite: 80 */
      border-radius: 10px;
    }
    .lyrics-container::-webkit-scrollbar-track {
      background: transparent; /* íŠ¸ë™ ë°°ê²½ íˆ¬ëª… cite: 81 */
    }

    /* ë°˜ì› ë ˆì½”ë“œ ë˜í¼ */
    .record-wrapper{
      width:min(360px,84vw);
      margin-top:-36px; /* cite: 82 */
      display:flex;justify-content:center;align-items:flex-start;
      perspective:1000px;
    }

    /* ë°˜ì› í´ë¦¬í•‘ ì˜ì—­ */
    .half-clip{
      --diameter: min(360px,84vw);
      width:var(--diameter); /* cite: 83 */
      height:calc(var(--diameter) / 2); /* cite: 83 */
      overflow:hidden;
      border-top-left-radius:9999px;
      border-top-right-radius:9999px;
      position:relative;
      touch-action:none; /* cite: 84 */
    }

    .record-3d{
      width:var(--diameter);
      height:var(--diameter);
      position:absolute;
      left:0;
      top:0;
      transform-style:preserve-3d;
      will-change:transform; /* cite: 85 */
      transition: transform 120ms linear; /* cite: 86 */
    }

    /* ì‹¤ì œ ë ˆì½”ë“œ */
    .vinyl{
      width:100%;
      height:100%;
      border-radius:50%;
      overflow:hidden;
      box-shadow:0 12px 30px rgba(0,0,0,0.5), inset 0 -6px 30px rgba(0,0,0,0.35); /* cite: 87 */
      transform-style:preserve-3d;
      backface-visibility:hidden;
      position:relative;
      background:#000;
      will-change: transform; /* cite: 88 */
    }
    .vinyl img{width:100%;height:100%;object-fit:cover;display:block;pointer-events:none;-webkit-user-drag:none}

    /* ë ˆì´ë¸” ë²„íŠ¼ */
.label {
  position: absolute;              /* ë¶€ëª¨ ìš”ì†Œ ê¸°ì¤€ìœ¼ë¡œ ì ˆëŒ€ ìœ„ì¹˜ ì§€ì • */
  width: 20%;                      /* ìš”ì†Œì˜ ë„ˆë¹„ë¥¼ ë¶€ëª¨ì˜ 22%ë¡œ ì„¤ì • */
  height: 11%;                     /* ìš”ì†Œì˜ ë†’ì´ë¥¼ ë¶€ëª¨ì˜ 22%ë¡œ ì„¤ì • */
  border-radius: 50%;              /* ì›í˜• ëª¨ì–‘ì„ ë§Œë“¤ê¸° ìœ„í•´ ë°˜ì§€ë¦„ì„ 50%ë¡œ ì„¤ì • */
  top: 82%;                        /* ë¶€ëª¨ ìš”ì†Œì˜ ìœ„ìª½ì—ì„œ 40% ìœ„ì¹˜ */
  left: 48%;                       /* ë¶€ëª¨ ìš”ì†Œì˜ ì™¼ìª½ì—ì„œ 50% ìœ„ì¹˜ */
  transform: translate(-50%, -50%);/* ìš”ì†Œë¥¼ ì •í™•íˆ ì¤‘ì•™ì— ë°°ì¹˜ (X,Yì¶• -50% ì´ë™) */
  
  display: flex;                   /* ë‚´ë¶€ ì½˜í…ì¸ ë¥¼ flexboxë¡œ ë°°ì¹˜ */
  align-items: center;             /* ì„¸ë¡œ ë°©í–¥ ì¤‘ì•™ ì •ë ¬ */
  justify-content: center;         /* ê°€ë¡œ ë°©í–¥ ì¤‘ì•™ ì •ë ¬ */
  
  color: #fff;                     /* ê¸€ì ìƒ‰ìƒì„ í°ìƒ‰ìœ¼ë¡œ ì„¤ì • */
  font-weight: 700;                /* ê¸€ì ë‘ê»˜ë¥¼ êµµê²Œ ì„¤ì • */
  font-size: 0.95rem;              /* ê¸€ì í¬ê¸°ë¥¼ 0.95remìœ¼ë¡œ ì„¤ì • */
  
  cursor: pointer;                 /* ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ì»¤ì„œê°€ ì† ëª¨ì–‘ìœ¼ë¡œ ë³€ê²½ */
  box-shadow: 0 6px 18px rgba(0,0,0,0.5); /* ê·¸ë¦¼ì íš¨ê³¼ (X=0, Y=6px, Blur=18px, ë°˜íˆ¬ëª… ê²€ì •) */
  
  z-index: 20;                     /* ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ ë ˆì´ì–´ ìš°ì„ ìˆœìœ„ ì„¤ì • */
  user-select: none;               /* í…ìŠ¤íŠ¸ ë“œë˜ê·¸ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì„¤ì • */
  
  transition: 
    transform 280ms cubic-bezier(.2,.9,.2,1), /* ë³€í˜• ì• ë‹ˆë©”ì´ì…˜ (ë¶€ë“œëŸ¬ìš´ ê³¡ì„ ) */
    background 280ms;              /* ë°°ê²½ìƒ‰ ë³€ê²½ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ì ìš© */
  
  backface-visibility: hidden;     /* 3D ë³€í™˜ ì‹œ ë’·ë©´ì´ ë³´ì´ì§€ ì•Šë„ë¡ ì„¤ì • */
}
    .label .front, .label .back{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;border-radius:50%;backface-visibility:hidden}
    .label .back{transform:rotateY(180deg)}

    .vinyl::after{
      content:"";
      position:absolute;left:0;top:0;right:0;bottom:0;border-radius:50%; /* cite: 91 */
      background:radial-gradient(circle at 30% 20%, rgba(255,255,255,0.03), transparent 12%), linear-gradient(180deg, rgba(255,255,255,0.02), transparent 30%); /* cite: 91 */
      pointer-events:none;mix-blend-mode:screen; /* cite: 92 */
    }

    .hint{margin-top:18px;color:var(--muted);font-size:.85rem}
    .index-badge{position:fixed;right:14px;bottom:18px;background:rgba(255,255,255,0.04);padding:8px 10px;border-radius:10px;color:var(--muted);font-size:.85rem}

    .label-flip{position:absolute;inset:0;transform-style:preserve-3d;transition: transform 520ms cubic-bezier(.2,.9,.2,1)}
    .part1 .label { background: var(--accent1); /* cite: 93 */
    }
    .part2 .label { background: var(--accent2); /* cite: 94 */
    }

    .record-shadow{position:absolute;left:50%;transform:translateX(-50%);bottom:-8%;width:calc(var(--diameter) * 0.95);height:18px;border-radius:50%;filter:blur(12px);opacity:0.6;background:linear-gradient(90deg, rgba(0,0,0,0.6), rgba(0,0,0,0.4));pointer-events:none}

    .logo-img {
        max-width: 50px;
        height: auto;
        position: relative;
        top: 22px;
        left: 0px;
      }

      .progress-container {
  width: 80%;
  margin-top: 12px;
  text-align: center;
}

#progressBar {
  width: 100%;
  appearance: none;
  height: 6px;
  border-radius: 3px;
  background: rgba(255,255,255,0.2);
  cursor: pointer;
}

#progressBar::-webkit-slider-thumb {
  appearance: none;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: var(--accent1);
  cursor: pointer;
}

.time-display {
  margin-top: 6px;
  font-size: 0.85rem;
  color: var(--muted);
}

  </style>
  </head>
    <header>
      <!-- ë©”ë‰´ ë²„íŠ¼ -->
  <button class="menu-button" onclick="toggleMenu()">â˜°</button>

  <!-- ìŠ¬ë¼ì´ë“œ ë©”ë‰´ -->
  <div id="slide-menu">
  <!-- ë‹«ê¸° ë²„íŠ¼ -->
  <button class="close-button" onclick="toggleMenu()">âœ•</button>
      <ul>
      <li><a href="about_SB.html">ë™ì•„ë¦¬ ì†Œê°œ</a></li>
      <li><a href="intro.html">ê³µì—° ì†Œê°œ</a></li>
      <li><a href="track_list.html">íŠ¸ë™ë¦¬ìŠ¤íŠ¸</a></li>
      <li><a href="audio_track.html">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</a></li>
    </ul>
  </div>
      <!-- ë©”ì¸ í™”ë©´ ì´ë™ ë¡œê³  ì´ë¯¸ì§€ -->
        <a id="photo-link" href="index.html">
              <img src="image_file/SB_logo.png" alt="ë¡œê³  ì‚¬ì§„" class="logo-img">
          </a>
    </header>
  <body>
  <div class="wrap">
    <div class="player" id="playerBox">
      <div class="title" id="title">Track 1</div>
      <div class="artist" id="artist">Artist A</div>
      <!-- ì¬ìƒë°” + ì‹œê°„ í‘œì‹œ -->
  <div class="progress-container">
    <input type="range" id="progressBar" value="0" min="0" max="100" step="1">
    <div class="time-display">
      <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
    </div>
  </div>


      <div class="meta-row">
        <div class="play-btn" id="playBtn" title="Play/Pause">
          <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        </div>
        <div class="lyrics-btn" id="lyricsBtn" role="button">ê°€ì‚¬</div>
        </div>

      <div class="lyrics-container" id="lyricsContainer" aria-hidden="true">
          <p id="lyricsContent">ê°€ì‚¬ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p> </div>
    </div>

    <div class="label" id="labelBtn" role="button" aria-pressed="false">
        <div class="label-flip" id="labelFlip">
           <div class="front">1ë¶€</div>
           <div class="back">2ë¶€</div> </div> </div>

    <div class="record-wrapper">
      <div 
      class="half-clip" id="halfClip" aria-hidden="false"> <div class="record-3d part1" id="record3d">
          <div class="vinyl" id="vinyl">
            <img id="recordImg" src="image_file/CD_img.png" alt="record image" />
          </div>

        </div>
      </div>
      <div class="record-shadow" id="recordShadow"></div>
    </div>

    <div class="hint" id="hint">ë ˆì½”ë“œë¥¼ ì¢Œìš°ë¡œ ë“œë˜ê·¸í•´ íšŒì „í•˜ì„¸ìš”.
    ì¤‘ì•™ ë¼ë²¨ì„ íƒ­í•˜ë©´ 1ë¶€/2ë¶€ ì „í™˜ë©ë‹ˆë‹¤.</div> <div class="index-badge" id="idxBadge">1 / 5</div>
  </div>

  <script>
      function toggleMenu() {
      const menu = document.getElementById("slide-menu");
      menu.classList.toggle("open");
    }

    function toggleSubMenu() {
      const submenu = document.getElementById("sub-menu");
      submenu.style.display = submenu.style.display === "block" ? "none" : "block";
    }
  /* ------------------------------
    íŠ¸ë™ ë°ì´í„° (íŒŒíŠ¸ 1, íŒŒíŠ¸ 2) - ê°€ì‚¬ í¬í•¨
  ------------------------------ */
  const FULL_LYRICS = "í¬ê²Œ í•œíŒ í–ˆë„¤ ë˜ yeah\në§ˆìŒì€ ì°©í•œ ì•„ì´ë¼ë©° bullshit\në‹¤ì‹œ ë§Œë‚œë‹¤ í•  ë•Œë¶€í„°\nì™ ì§€ ëŠë‚Œì´ ì„í•˜ê¸´ í–ˆì–´\nListen ë‹¤íˆ¬ëŠ” ê±° ê¹Œì§„ okay\në¬¸ì œëŠ” ì§€ê¸ˆì´ ëª‡ ì‹œ ê²Œ\në©”ì‹œì§€ í™•ì¸í•´ì„œ ë­í•´\nê±˜ ë°±í”„ë¡œ ê²Œì„ ì¤‘ì¼ í…ë°\nSomething is wrong\nì—¬ê¸° ìˆëŠ” ë„ˆë„ ì±…ì„ì´ ì»¤\nì–˜ê¸° ì•ˆ ëë‚¬ì–´ ì•‰ì•„\nActually ì´ì   ì •ë§ í—¤ì–´ì¡Œìœ¼ë©´ ì¢‹ê² ì–´\nì ê¹ ë§ê³  ì •ì‹ìœ¼ë¡œ í•œ ìª½ë§Œ ì†í•´ ë³¸ ê±¸\nHonestly ì• ì´ˆì— ë„¤ê°€\nì²œë§Œ ë°°ëŠ” ì•„ê¹Œì›Œ\nê±°ì§“ë§ ì¢€ ë³´íƒ°ì–´\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\níœ˜ë‘˜ë¦¬ê³  ìˆë„¤ ë˜\nê¼­ ì§‘ê³  ë„˜ì–´ê°„ë‹¤ë©° foolish\në„Œ ì–´ë¬¼ì© í™”í•´í•´ ë²„ë¦¬ê³¤\ní•­ìƒ ì½”ì•ì—ì„œ í¬ì¸íŠ¸ë¥¼ ë†“ì³\nYo ê¸°ë…ì¼ ê±´ë„ˆë›°ê³ \nì§€ ìˆ  ëª¨ì„ì—” ê¼¬ë°•ê¼¬ë°• ì¶œì„í•˜ì§€\nê³¼í•œ style ì§ˆìƒ‰í•˜ëŠ” \në„Œ ë°\në¡œê³  ë°•íŒ ëª…í’ˆ ì£¼ëŠ” ê±´ ë¬´ìŠ¨ ê¹¡ì¸ì§€\nSoundCloudì— ì¶”ê°€ëœ íŠ¸ë™ë“¤\nêµ¬ë… ì¤‘ì¸ YouTube ì±„ë„ë§Œ ë´ë„\nì´ ì¡°í•©ì€ ì˜¤ë˜ ëª» ê°€\nActually ì´ì   ì •ë§ í—¤ì–´ì¡Œìœ¼ë©´ ì¢‹ê² ì–´\nì ê¹ ë§ê³  ì •ì‹ìœ¼ë¡œ í•œ ìª½ë§Œ ì†í•´ ë³¸ ê±¸\nHonestly ì• ì´ˆì— ë„¤ê°€\nì²œë§Œ ë°°ëŠ” ì•„ê¹Œì›Œ\nê±°ì§“ë§ ì¢€ ë³´íƒ°ì–´\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\nwoo, woo, woo, woo, woo\nStop hesitating you choose\ní™˜ìŠ¹í•  ë•Œì•¼ ìŠ¬ìŠ¬\në©€ë¦¬ ê°€ì„œ ì°¾ì§€ ë§ˆ êµ³ì´\në“±ì” ë°‘ì— ëˆ„ê°€ ìˆëŠ”ì§€ í™•ì¸í•´ ì–´ì„œ yo\nìê¾¸ ì‚°í†µ ê¹¨ì„œ ë¯¸ì•ˆí•œë° (sorry)\nì‚¬ì‹¤ ì¢€ ê³ ë§ˆì›Œ ë…€ì„í•œí…Œ\në§ ë‚˜ì˜¨ ê¹€ì— ê·¸ëƒ¥ ê³ í• ê²Œ\nYou're the one, you're the one\nYou're the one that I want\nActually ì• ì´ˆì— ë„ˆë‘\nì¹œêµ¬ ë¨¹ê¸° ì‹«ì—ˆì–´\nëª» ë“¤ì€ ì²™ ë„˜ê¸°ì§€ë§ˆ\nì¢‹ì•„í•œë‹¨ ë§ì´ì•¼\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\nì•”íŠ¼ê°„ ê±˜ ì•„ë‹ˆì•¼\nwoo, woo, woo, woo, woo"; /* cite: 98 */

  const PARTS = {
    1: [
      { title: "P1 - Track 1", artist: "Artist A", audioSrc: "audio/track1.mp3", lyrics: FULL_LYRICS }, /* cite: 99 */
      { title: "P1 - Track 2", artist: "Artist A", audioSrc: "audio/track2.mp3", lyrics: "ì˜¤ëŠ˜ ë°¤ì´ ë§Œì•½ ë‚´ê²Œ ì£¼ì–´ì§„\në›ëŒ€ì™€ ê°™ë‹¤ë©´ what should i do with this?\nmmmm maybe\nì§€ë‚˜ì˜¨ ë‚˜ë‚ ë“¤ì„ ì‹œì›í•˜ê²Œ í›‘ê² ì§€\nìŠ¤ë¬¼ ì—¬ì„¯ ì»·ì˜ í‘ë°± film\në‚´ ë¨¸ë¦¿ì†ì˜ ìŠ¤ì¼€ì¹˜\nì›í•˜ë“  ë§ë“  ë©”ëª¨ë¦¬ë“¤ì´\në¹„ ì˜¤ë“¯ ìŸì•„ì§€ê² ì§€\nì—„ë§ˆì˜ í”¼ì— ì –ì–´ íƒœì–´ë‚˜ê³  ë‚´ê°€ ì²˜ìŒ ë°°ì› ë˜ ì–¸ì–´\në¶€í„° ë‚¯ì„  ë‚˜ë¼ ìœ„ì— ë–¨ì–´ì ¸ ë³„ ë‹¤ë¥¸ ë…¸ë ¥ ì—†ì´ ë°°ì› ë˜ ì˜ì–´\në‚˜ì˜ ì•„ë²„ì§€ì— ëŒ€í•œ í˜ì˜¤ì™€ ë‚˜ì˜ ìƒˆ ì•„ë²„ì§€ì— ëŒ€í•œ ë‚˜ì˜ ì¡´ê²½\nê°‘ìê¸° ë– ì˜¤ë¥¸ í‘œí˜„ life's like ì˜¤ë Œì§€ìƒ‰ì˜ í„°ë„\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die die die\nê³ ê°œë¥¼ 45ë„ ê¸°ìš¸ì—¬\në‹´ë°° ì—°ê¸°ì™€ í•¨ê»˜ í’ˆì€ ê¸°ì–µë ¥\nì¶”ì–µì„ ì†Œë¦¬ì²˜ëŸ¼ í‚¤ìš°ë©´\nëˆˆì„ ê°ì•„ë„ ë³´ì˜¤ì´ëŠ” theater\nì‹œê°„ì€ ìœ ì—°í•˜ê²Œ íœ˜ì–´ì ¸\nê³¼ê±°ë¡œ ìŠ¤í”„ë§ì²˜ëŸ¼ ì´ì–´ì ¸\nì•„ì£¼ ì‘ê³  ì‘ì•˜ë˜ ë¯¸ë‹ˆì–´ì³\nì‹œì ˆì„ ë– ì˜¬ë¦¬ëŠ” ê±´ ê»Œì²˜ëŸ¼ ì‰¬ì›Œì ¸\në¹¨ì£¼ë…¸ì´ˆ ë¬¼ê°ì„ ëœì–´ í•˜ì–€ìƒ‰ ì¢…ì´ ìœ„ë¥¼ ì´ì²˜ëŸ¼ ê²¨ëˆ´ë˜\nì–´ë¦° í™”ê°€ì˜ ê²½ë ¥ì€ ëœ¬ê¸ˆì—†ê²Œë„ í™í•©ì— ëˆˆì´ ë©€ì–´\në©ˆì¶°ë²„ë ¸ì§€ë§Œ ì „í˜€ ë‘ë µì§€ ì•Šì•˜ì–´ cuz I didn't give a fuck\nabout ë‚¨ì˜ ì‹œì„  cuz life is like ë‚˜ í™€ë¡œ ê±¸ì–´ê°€ëŠ” í„°ë„\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die die die\në‚´ê²Œë„ ë§ˆì§€ë§‰ í˜¸í¡ì´ ì£¼ì–´ì§€ê² ì§€\në§ˆë¼í†¤ì´ ëë‚˜ë©´ ëˆì´ ëŠì–´ì§€ë“¯ì´\në‹¹ì—°ì‹œ ì—¬ê²¼ë˜ ì•„ì¹¨ ì•„í™‰ ì‹œì˜ í•´ì™€\nìŒì•…ì— ëª°ë‘í•˜ë˜ ë°¤ë“¤ë¡œë¶€í„° fade out\në§ë³´ë¡œì™€ í•¨ê»˜ íƒ„ ë‚´ 20ëŒ€ì˜ ìƒí™œ\në‚´ ìƒì— ë§ˆì§€ë§‰ ì—¬ìì™€ì˜ ì• ì •ì˜ í–‰ê°\nì±…ìƒ ìœ„ì— ë†“ì¸ 1800ì› ì§œë¦¬ íœê³¼\në‚´ê°€ ì„¸ìƒì— ë‚´ë†“ì€ ë‚´ ë…¸ë˜ê°€ ê°€ì§„ ìƒ‰ê¹”\nê¹Œì§€ ëª¨ë‘ ë‹¤ ë‹¤ì‹œëŠ” ëª» ë³¼ ê²ƒ ê°™ì•„\nì‚¶ì´ë€ ê²Œ ì¢€ ì§€ê²¹ê¸´ í•´ë„ ì¢‹ì€ ê±´ê°€ ë´\nì—„ë§ˆ don't worry bout me ma\nì—„ë§ˆ ì…ì¥ì—ì„œ ì•„ë“¤ì˜ ì£½ìŒì€ ë„ë‘‘ ê°™ê² ì§€ë§Œ\nI'll be always in your heart ì˜ì›íˆ\nI'll be always in your heart í• ë¨¸ë‹ˆ\nyou don't have to miss me ë‚œ ì´ ë…¸ë˜ ì•ˆì— ìˆìœ¼ë‹ˆê¹Œ\në‚˜ì˜ ëª©ì†Œë¦¬ë¥¼ ìŠì§€ë§ˆ\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die tomorrow\nIf I die die die" }, /* cite: 99, 100, 101, 102 */
      { title: "P1 - Track 3", artist: "Artist A", audioSrc: "audio/p1_track3.mp3", lyrics: "P1 - Track 3 ê°€ì‚¬.\në…¸ë˜ëŠ” ê³„ì†ë©ë‹ˆë‹¤." }, /* cite: 103 */
      { title: "P1 - Track 4", artist: "Artist A", audioSrc: "audio/p1_track4.mp3", lyrics: "P1 - Track 4 ê°€ì‚¬.\në“œë˜ê·¸í•´ì„œ íŠ¸ë™ì„ ë„˜ê²¨ë³´ì„¸ìš”." }, /* cite: 104 */
      { title: "P1 - Track 5", artist: 
      "Artist A", audioSrc: "audio/p1_track5.mp3", lyrics: "ë§ˆì§€ë§‰ íŠ¸ë™ì˜ ê°€ì‚¬ì…ë‹ˆë‹¤.\nëì€ ë˜ ë‹¤ë¥¸ ì‹œì‘ì„ ì•Œë¦¬ì£ ." }, /* cite: 105 */
      { title: "P1 - Track 6", artist: "Artist A", audioSrc: "audio/p1_track6.mp3", lyrics: "P1 - Track 6 ê°€ì‚¬." }
    ],
    2: [
      { title: "P2 - Track 1", artist: "Artist B", audioSrc: "audio/p2_track1.mp3", lyrics: FULL_LYRICS },
      { title: "P2 - Track 2", artist: "Artist B", audioSrc: "audio/p2_track2.mp3", lyrics: "ìƒˆë¡œìš´ ì‹œì‘, P2-T2 ê°€ì‚¬ì…ë‹ˆë‹¤." }, /* cite: 106 */
      { title: "P2 - Track 3", artist: "Artist B", audioSrc: "audio/p2_track3.mp3", lyrics: "P2 - Track 3 ê°€ì‚¬.\níŒŒíŠ¸ ì „í™˜ì„ í•´ë³´ì„¸ìš”." }, /* cite: 107 */
      { title: "P2 - Track 4", artist: "Artist B", audioSrc: "audio/p2_track4.mp3", lyrics: "P2 - Track 4 ê°€ì‚¬.\nì´ ë ˆì½”ë“œëŠ” 3Dì…ë‹ˆë‹¤." }, /* cite: 108 */
      { title: "P2 - Track 5", artist: "Artist B", audioSrc: "audio/p2_track5.mp3", lyrics: "íŒŒíŠ¸ 2ì˜ ë§ˆì§€ë§‰ íŠ¸ë™ ê°€ì‚¬ì…ë‹ˆë‹¤." } /* cite: 109 */
    ]
  };
  /* ------------------------------
    DOM ìš”ì†Œ ì°¸ì¡°
  ------------------------------ */
  const titleEl = document.getElementById('title');
  const artistEl = document.getElementById('artist'); /* cite: 110 */
  const idxBadge = document.getElementById('idxBadge'); // cite: 97
  const record3d = document.getElementById('record3d');
  const halfClip = document.getElementById('halfClip');
  const vinyl = document.getElementById('vinyl'); /* cite: 111 */
  const labelBtn = document.getElementById('labelBtn');
  const labelFlip = document.getElementById('labelFlip');
  const playBtn = document.getElementById('playBtn'); /* cite: 112 */
  const recordShadow = document.getElementById('recordShadow');
  const lyricsBtn = document.getElementById('lyricsBtn');
  // â­ í”Œë ˆì´ì–´ ë°•ìŠ¤ ë° ê°€ì‚¬ ì»¨í…Œì´ë„ˆ/ë‚´ìš© ì°¸ì¡° ì¶”ê°€
  const playerBox = document.getElementById('playerBox'); /* cite: 113 */
  const lyricsContainer = document.getElementById('lyricsContainer'); /* cite: 113 */
  const lyricsContent = document.getElementById('lyricsContent'); /* cite: 113 */


  /* ------------------------------
    ìƒíƒœ ë³€ìˆ˜
  ------------------------------ */
  let currentPart = 1;
  let currentIndex = 0; /* cite: 114 */
  let visualAngle = 0;
  let dragAccum = 0;
  let lastAngle = null;
  let isPointerDown = false; /* cite: 115 */
  let pointerId = null;
  let lastTime = 0;
  let velocity = 0;
  let tiltX = 0, tiltY = 0; /* cite: 116 */
  let isFlipping = false;
  let isLyricsVisible = false; /* cite: 117 */

  /* ------------------------------
    ì˜¤ë””ì˜¤ ê°ì²´
  ------------------------------ */
  let audio = new Audio();
  audio.loop = false;
  audio.volume = 0.8; /* cite: 118 */

  /* ------------------------------
    íŠ¸ë™ UI ì—…ë°ì´íŠ¸ + ì˜¤ë””ì˜¤ src ì ìš©
  ------------------------------ */
  function updateTrackUI(){
    const track = PARTS[currentPart][currentIndex];
    titleEl.textContent = track.title; /* cite: 119 */
    artistEl.textContent = track.artist; /* cite: 119 */
    idxBadge.textContent = `${currentIndex + 1} / ${PARTS[currentPart].length}`;
    record3d.classList.toggle('part1', currentPart === 1); /* cite: 120 */
    record3d.classList.toggle('part2', currentPart === 2); /* cite: 121 */
    labelBtn.style.background = currentPart === 1
      ? getComputedStyle(document.documentElement).getPropertyValue('--accent1')
      : getComputedStyle(document.documentElement).getPropertyValue('--accent2'); /* cite: 122 */
    labelBtn.setAttribute('aria-pressed', currentPart === 2 ? 'true' : 'false');
    labelFlip.style.transform = currentPart === 1 ?
    'rotateY(0deg)' : 'rotateY(180deg)'; /* cite: 123 */
    
    // â­ ê°€ì‚¬ ë‚´ìš© ì—…ë°ì´íŠ¸
    lyricsContent.textContent = track.lyrics ||
    "ê°€ì‚¬ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."; /* cite: 124 */
    lyricsContainer.scrollTop = 0; // ìƒˆ íŠ¸ë™ìœ¼ë¡œ ë°”ë€” ë•Œ ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì´ˆê¸°í™”

    // ğŸ”Š í˜„ì¬ íŠ¸ë™ ì˜¤ë””ì˜¤ ì ìš©
    audio.src = track.audioSrc;
    if(playing) audio.play(); /* cite: 125 */
  }

  /* ------------------------------
    í”Œë ˆì´ ë²„íŠ¼ í† ê¸€
  ------------------------------ */
  let playing = false;
  playBtn.addEventListener('click', ()=>{ /* cite: 126 */
    playing = !playing;
    if(playing){
      audio.play();
      playBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6zm8-14v14h4V5h-4z"/></svg>';
    } else {
      audio.pause();
      playBtn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
    }
  }); /* cite: 127 */

  /* ------------------------------
    ë‹¤ìŒ/ì´ì „ íŠ¸ë™
  ------------------------------ */
  function nextTrack(){ currentIndex = (currentIndex + 1) % PARTS[currentPart].length; flashPlayer(); updateTrackUI(); /* cite: 128 */
  }
  function prevTrack(){ currentIndex = (currentIndex - 1 + PARTS[currentPart].length) % PARTS[currentPart].length; flashPlayer(); updateTrackUI(); /* cite: 129 */ }
  function flashPlayer(){
    const p = document.getElementById('playerBox');
    p.animate([{ transform:'scale(1)' },{ transform:'scale(0.96)' },{ transform:'scale(1)' }], { duration:260, easing:'cubic-bezier(.2,.9,.2,1)' }); /* cite: 130 */
  }

  /* ------------------------------
    ë ˆì´ë¸” íƒ­ -> íŒŒíŠ¸ ì „í™˜
  ------------------------------ */
  labelBtn.addEventListener('click', (ev)=>{
    if(isFlipping) return;
    isFlipping = true;
    const spinDeg = 720;
    const duration = 560;
    const prevTransform = record3d.style.transform || '';
    const nextPart = currentPart === 1 ? 2 : 1;

    const recordAnim = record3d.animate(
      [{ transform: prevTransform + ` rotate(${visualAngle}deg)` },
      { transform: prevTransform + ` rotate(${visualAngle + spinDeg}deg)` }],
      { duration, easing: 'cubic-bezier(.2,.9,.2,1)' }
    );

    vinyl.animate([{ transform: `rotate(0deg)` },{ transform: `rotate(${spinDeg}deg)` }], { duration, easing: 'cubic-bezier(.2,.9,.2,1)' });

    
    setTimeout(()=>{ labelFlip.style.transform 
    = nextPart === 2 ? 'rotateY(180deg)' : 'rotateY(0deg)'; }, duration/2 - 80); /* cite: 131 */

    setTimeout(()=>{ currentPart = nextPart; currentIndex = 0; updateTrackUI(); }, duration/2);

    recordAnim.onfinish = () => { vinyl.style.transform = 'none';
    record3d.style.transform = 'none'; visualAngle = 0; dragAccum = 0; velocity = 0; applyTransforms(); isFlipping = false; }; /* cite: 132 */
  }); /* cite: 133 */

  /* ------------------------------
    ë“œë˜ê·¸ íšŒì „ ë° í‹±í‹± íŠ¸ë™ ì „í™˜
  ------------------------------ */
  function pointToAngle(pageX, pageY){
    const rect = halfClip.getBoundingClientRect();
    const cx = rect.left + rect.width / 2; /* cite: 134 */
    const cy = rect.top + rect.height;
    const dx = pageX - cx; /* cite: 135 */
    const dy = pageY - cy;
    return Math.atan2(dy, dx) * 180 / Math.PI; /* cite: 136 */
  }
  function normalizeAngle(a){ while(a>180) a-=360; while(a<-180) a+=360;
    return a; /* cite: 137 */
  }

  function onPointerDown(e){
    isPointerDown = true; pointerId = e.pointerId;
    halfClip.setPointerCapture && halfClip.setPointerCapture(pointerId);
    lastAngle = pointToAngle(e.pageX, e.pageY); /* cite: 138 */
    lastTime = performance.now();
    velocity = 0; dragAccum = 0;
    updateTiltFromPointer(e.pageX, e.pageY);
    e.preventDefault(); /* cite: 139 */
  }

  function onPointerMove(e){
  if(!isPointerDown || (pointerId != null && e.pointerId !== pointerId)) return;
  const now = performance.now();
  const curAngle = pointToAngle(e.pageX, e.pageY);
  let delta = normalizeAngle(curAngle - lastAngle);
  const dt = Math.max(1, now - lastTime);
  const instantVel = delta / dt;
  velocity = velocity * 0.6 + instantVel * 0.4;
  lastAngle = curAngle;
  lastTime = now;
  dragAccum += delta; 
  visualAngle += delta;
  applyTransforms();

  updateTiltFromPointer(e.pageX, e.pageY);
  e.preventDefault();
}

  function onPointerUp(e){
  if(pointerId != null && e.pointerId !== pointerId) return;
  isPointerDown = false;
  try{ halfClip.releasePointerCapture && halfClip.releasePointerCapture(pointerId); }catch(_){}
  pointerId = null;
  lastAngle = null;

  const TICK_ANGLE = 30;
  if (dragAccum >= TICK_ANGLE) {
    nextTrack();
  } else if (dragAccum <= -TICK_ANGLE) {
    prevTrack();
  }
  dragAccum = 0; // ì´ˆê¸°í™”

  if(Math.abs(velocity) > 0.02) startInertia(velocity);
  else resetRotationVisual();
}

  function applyTransforms(){
    const tX = Math.max(-12, Math.min(12, tiltX));
    const tY = Math.max(-20, Math.min(20, tiltY));
    record3d.style.transform = `rotateX(${tX}deg) rotateY(${tY}deg) rotate(${visualAngle}deg)`; /* cite: 149 */
    const shadowOffsetX = (tY / 20) * 12;
    const scale = 1 - Math.abs(tX)/80; /* cite: 150 */
    recordShadow.style.transform = `translateX(${shadowOffsetX}px) scaleX(${scale})`; /* cite: 150 */
  }

  function updateTiltFromPointer(pageX, pageY){
    const rect = halfClip.getBoundingClientRect();
    const cx = rect.left + rect.width/2; /* cite: 151 */
    const cy = rect.top + rect.height/2; /* cite: 152 */
    tiltY = ((pageX - cx) / rect.width) * 28;
    tiltX = -((pageY - cy) / rect.height) * 18; /* cite: 153 */
  }

  function resetRotationVisual(duration = 360){
    const start = visualAngle;
    const startTime = performance.now(); /* cite: 154 */
    function frame(t){
      const p = Math.min(1, (t - startTime) / duration); /* cite: 155 */
      const ease = 1 - Math.pow(1 - p, 3);
      visualAngle = start * (1 - ease); /* cite: 156 */
      tiltX *= 0.92;
      tiltY *= 0.92; /* cite: 157 */
      applyTransforms();
      if(p<1) requestAnimationFrame(frame);
    }
    requestAnimationFrame(frame);
  }

  /* ------------------------------
    ê´€ì„± íšŒì „
  ------------------------------ */
  function startInertia(initVel){
  let v = initVel;
  function frame(){
    if(Math.abs(v) < 0.002) return;
    visualAngle += v * 3; // íšŒì „ ì†ë„ ì¡°ì ˆ
    applyTransforms();
    v *= 0.92; // ê°ì‡ 
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

  /* ------------------------------
    ì´ë²¤íŠ¸ ë“±ë¡
  ------------------------------ */
  halfClip.addEventListener('pointerdown', onPointerDown); /* cite: 162 */
  halfClip.addEventListener('pointermove', onPointerMove);
  halfClip.addEventListener('pointerup', onPointerUp);
  halfClip.addEventListener('pointercancel', onPointerUp);
  halfClip.addEventListener('pointerleave', onPointerUp); /* cite: 163 */

  // â­ "ê°€ì‚¬ ë³´ê¸°" ë²„íŠ¼ ì´ë²¤íŠ¸ (UI ë³€ê²½ ë¡œì§)
  lyricsBtn.addEventListener('click', ()=>{
    isLyricsVisible = !isLyricsVisible;
    
    // í”Œë ˆì´ì–´ ë°•ìŠ¤ì˜ ë†’ì´ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•˜ì—¬ ê°€ì‚¬ ì˜ì—­ì„ ë³´ì´ê±°ë‚˜ ìˆ¨ê¹€
    playerBox.classList.toggle('show-lyrics', isLyricsVisible);
    
    // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ë³€ê²½
    lyricsBtn.classList.toggle('active', isLyricsVisible);
    
    // ì ‘ê·¼ì„±ì„ ìœ„í•œ aria ì†ì„± ë³€ê²½
    lyricsContainer.setAttribute('aria-hidden', !isLyricsVisible);

    // ê°€ì‚¬ ë³´ê¸°ë¥¼ ì¼¤ ë•Œ ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ ì´ë™
    if (isLyricsVisible) {
        lyricsContainer.scrollTop = 0;
    }
  }); /* cite: 164 */


  /* ------------------------------
    ì´ˆê¸° íŠ¸ë™ ì„¤ì •
  ------------------------------ */
  updateTrackUI();



  const progressBar = document.getElementById('progressBar');
const currentTimeEl = document.getElementById('currentTime');
const durationEl = document.getElementById('duration');

// ì‹œê°„ í¬ë§· í•¨ìˆ˜
function formatTime(seconds) {
  const mins = Math.floor(seconds / 60);
  const secs = Math.floor(seconds % 60);
  return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
}

// ì „ì²´ ê¸¸ì´ í‘œì‹œ
audio.addEventListener('loadedmetadata', () => {
  durationEl.textContent = formatTime(audio.duration);
});

// ì§„í–‰ ìƒí™© ì—…ë°ì´íŠ¸
audio.addEventListener('timeupdate', () => {
  const percent = (audio.currentTime / audio.duration) * 100;
  progressBar.value = percent || 0;
  currentTimeEl.textContent = formatTime(audio.currentTime);
});

// ì‚¬ìš©ìê°€ ë°”ë¥¼ ì›€ì§ì´ë©´ ì˜¤ë””ì˜¤ ìœ„ì¹˜ ë³€ê²½
progressBar.addEventListener('input', () => {
  const seekTime = (progressBar.value / 100) * audio.duration;
  audio.currentTime = seekTime;
});
  </script>
  </body>
  </html>


